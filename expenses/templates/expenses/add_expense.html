{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="form-container">
    <div class="form-card">
        <div class="card-header">
            <h2>Dodaj nowy wydatek</h2>
            <div class="quick-tips">
                Wypełnij poniższy formularz, aby dodać nowy wydatek
            </div>
        </div>

        <form method="POST">
            {% csrf_token %}

            <div class="form-group">
                <label>Kwota (zł)</label>
                {{ form.amount }}
            </div>

            <div class="form-group">
                <label>Data</label>
                {{ form.date }}
            </div>

            <div class="form-group">
                <label>Metoda płatności</label>
                {{ form.payment_method }}
            </div>

            <div class="form-group">
                <label>Kategoria</label>
                {{ form.category }}

                <div id="new-category-wrapper" style="display: none; margin-top: 10px;">
                    <label>Nazwa nowej kategorii</label>
                    {{ form.new_category }}
                </div>
            </div>

            <div class="form-group">
                <label>Opis (opcjonalnie)</label>
                {{ form.description }}
            </div>

            <div class="form-actions">
                <button type="submit" class="submit-button">Dodaj wydatek</button>
            </div>
        </form>
    </div>
</div>

<div class="bottom-navigation">
    <div class="nav-item" onclick="location.href='{% url 'dashboard' %}'">
        <i data-lucide="home"></i>
        <span>Panel główny</span>
    </div>
    <div class="nav-item" onclick="location.href='{% url 'budget' %}'">
        <i data-lucide="wallet"></i>
        <span>Zarządzaj wydatkami</span>
    </div>
</div>

<script>
document.getElementById('id_category').addEventListener('change', function() {
    const newCategoryWrapper = document.getElementById('new-category-wrapper');
    if (this.value === 'new') {
        newCategoryWrapper.style.display = 'block';
    } else {
        newCategoryWrapper.style.display = 'none';
    }
});
</script>

{% endblock %}